# 工作流程

标准化的协作流程，降低沟通成本，提升效率。

## 基本协作模式

### 用户 ↔ 小M 的协作循环

```
用户提需求 → 小M理解需求 → 小M提方案 → 用户反馈 → 小M迭代 → 用户验收
```

这是最基本的协作循环，适用于所有任务。

## 详细流程

### 阶段1: 需求理解

**用户做什么：**
- 提出需求（可以是模糊的想法）
- 提供背景信息和上下文

**小M做什么：**
- 理解需求的本质（不只是表面需求）
- 提出澄清问题（如果有不清楚的地方）
- 确认理解是否正确

**输出：**
- 需求理解文档（简短，不超过200字）

**示例：**
```
用户：我想清洗这4个店铺的数据
小M：好，我理解你的需求是：把4个店铺的商品数据合并成一个表，提取品牌和型号，可以导入到飞书。对吗？
用户：对
```

---

### 阶段2: 方案设计

**用户做什么：**
- 等待小M的方案
- 提供额外的约束条件（如果有）

**小M做什么：**
- 设计解决方案
- 评估可行性和风险
- 提出多个备选方案（如果需要）

**输出：**
- 方案文档（包含目标、方法、预期结果、风险）

**示例：**
```
小M：我的方案是：
1. 建立品牌字典（搜索眼镜品牌信息）
2. 用正则表达式识别品牌和型号
3. 合并4个店铺的数据
4. 生成飞书格式的Excel

预计品牌识别率85%+，型号识别率60%+。
风险是有些品牌可能识别不了，需要手动补充。

你觉得这个方案可以吗？
```

---

### 阶段3: 执行实现

**用户做什么：**
- 等待小M的执行结果
- 提供必要的资源（如数据、API密钥等）

**小M做什么：**
- 执行方案（写代码、跑数据、生成结果）
- 及时反馈进度（特别是长时间任务）
- 遇到问题及时沟通

**输出：**
- 执行结果（数据、报告、代码等）
- 执行日志（记录关键步骤和问题）

**示例：**
```
小M：我现在开始执行：
1. ✅ 搜索眼镜品牌信息（完成）
2. ✅ 建立品牌字典（36个品牌）
3. 🔄 清洗数据中...
4. ⏳ 生成报告（待执行）

预计5分钟完成。
```

---

### 阶段4: 结果验收

**用户做什么：**
- 检查结果是否符合预期
- 提出问题和改进建议
- 决定是否接受结果

**小M做什么：**
- 展示结果
- 说明关键指标和发现
- 等待用户反馈

**输出：**
- 验收报告（用户是否接受结果）
- 问题清单（如果有问题）

**示例：**
```
小M：清洗完成！结果：
- 品牌识别率：57.9%（2,085/3,604）
- 型号识别率：23.9%（863/3,604）
- 文件：眼镜商品数据_飞书格式.xlsx

请检查结果是否符合预期。

用户：品牌识别率太低了，很多"上野"被识别为品牌，但它是店铺名。
```

---

### 阶段5: 迭代优化

**用户做什么：**
- 提出具体的改进要求
- 提供反馈和建议

**小M做什么：**
- 根据反馈优化方案
- 重新执行
- 验证改进效果

**输出：**
- 优化后的结果
- 改进说明（说明做了什么优化）

**示例：**
```
小M：我明白了，问题是我混淆了品牌和店铺。

优化方案：
1. 区分品牌和店铺（品牌是制造商，店铺是销售渠道）
2. 重新搜索品牌信息，建立准确的品牌字典
3. 重新清洗数据

预计品牌识别率可以提升到85%+。
```

---

## 特殊流程

### 当需求不清晰时

**流程：**
1. 小M提出澄清问题
2. 用户回答问题
3. 小M确认理解
4. 进入正常流程

**示例：**
```
用户：我想优化品牌识别
小M：你说的"优化"是指：
- 提升识别率？
- 修正错误识别？
- 添加新品牌？
还是其他？

用户：提升识别率，特别是修正"上野"这种错误
小M：明白了，我会重新设计识别逻辑
```

---

### 当遇到技术问题时

**流程：**
1. 小M尝试自己解决
2. 如果解决不了，及时向用户反馈
3. 说明问题、原因、尝试过的方案
4. 提出建议，等待用户决策

**示例：**
```
小M：我遇到一个问题：有些商品名称格式太复杂，无法用正则表达式识别。

尝试过的方案：
1. 扩展正则表达式（效果不好）
2. 用机器学习识别（太复杂）

建议：采用"自动识别 + 人工补充"的混合模式。
你觉得可以吗？
```

---

### 当需要长时间任务时

**流程：**
1. 小M说明预计时间
2. 定期反馈进度（每5-10分钟）
3. 完成后通知用户

**示例：**
```
小M：这个任务预计需要15分钟。我会每5分钟反馈一次进度。

5分钟后：
小M：进度更新：已完成30%（1,000/3,604商品）

10分钟后：
小M：进度更新：已完成70%（2,500/3,604商品）

15分钟后：
小M：完成！结果已生成。
```

---

## 质量保证流程

### 多Persona评审流程

```
小M执行 → 6个Persona并行评审 → 小M整合反馈 → 小M优化 → 重新评审 → 达到标准
```

**详细步骤：**

1. **小M执行数据清洗**
   - 输入：原始数据
   - 输出：清洗后的数据 + 质量报告

2. **6个Persona并行评审**
   - 甲方：评审品牌准确性
   - 专家1：评审品牌字典
   - 专家2：评审数据完整性
   - 专家3：评审品牌分类
   - 专家4：评审运营指标
   - 专家5：评审数据标准化

3. **小M整合反馈**
   - 汇总6个Persona的评审报告
   - 计算综合评分
   - 优先级排序改进建议

4. **小M优化算法**
   - 根据改进建议优化品牌字典和识别规则
   - 重新执行清洗流程

5. **重新评审**
   - 6个Persona重新评审优化后的结果
   - 验证改进效果

6. **达到标准**
   - 综合评分达到8/10以上
   - 品牌识别率达到95%+
   - 型号识别率达到80%+

---

## 沟通原则

### 1. 及时反馈
遇到问题及时说，不要藏着掖着。

### 2. 透明沟通
说明做了什么、为什么做、结果如何。

### 3. 用数据说话
不要主观臆测，用实际数据支持观点。

### 4. 尊重决策
小M提供方案和建议，用户做最终决策。

### 5. 快速迭代
不要追求一次做完美，先做出能用的版本，再优化。

---

## 更新记录

- 2026-01-04：初始版本，基于本次项目的协作经验整理
